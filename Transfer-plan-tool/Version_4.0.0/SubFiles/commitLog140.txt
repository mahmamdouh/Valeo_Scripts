b'commit 0c52bc1f24c412ae20cc0665d2a982a953389f3f
Author: Frank IRMISCH (JV EXT) <frank.irmisch.jv.ext@valeo.com>
Date:   Fri Oct 22 11:31:21 2021 +0200

    $100kW-44239$ - The SW shall provide the Phase RMS current value to vehicle CAN: Integrate DRCO Part
    
    Change-Id: I29c67013ed51ec8f93271bdcdae319ee0aa8fd6f

diff --git a/src/fw_cu/Components/Cmn/Com/C2cCom/include/C2cComDrvCtrlData.h b/src/fw_cu/Components/Cmn/Com/C2cCom/include/C2cComDrvCtrlData.h
index ef085c904..0c32dd823 100644
--- a/src/fw_cu/Components/Cmn/Com/C2cCom/include/C2cComDrvCtrlData.h
+++ b/src/fw_cu/Components/Cmn/Com/C2cCom/include/C2cComDrvCtrlData.h
@@ -916,7 +916,43 @@ typedef struct DrvCtrlC2cDataType_
     @@ GROUP = C2cCom
     @@ END
     */
-   float32 HvAcFndmtlCptIPhaW;            /*! Phase W current amplitude in Amps */ 
+   float32 HvAcFndmtlCptIPhaW;            /*! Phase W current amplitude in Amps */
+
+    /*
+    @@ ELEMENT = HvAcFndmtlCptIRmsPhaU
+    @@ STRUCTURE = DrvCtrlC2cDataType
+    @@ A2L_TYPE = MEASURE
+    @@ DATA_TYPE = FLOAT
+    @@ CONVERSION = LINEAR 1 0 "A"
+    @@ DESCRIPTION = "Phase U RMS current amplitude in Amps"
+    @@ GROUP = C2cCom
+    @@ END
+    */
+    float32 HvAcFndmtlCptIRmsPhaU;            /*! Phase U RMS current amplitude in Amps */
+
+    /*
+    @@ ELEMENT = HvAcFndmtlCptIRmsPhaV
+    @@ STRUCTURE = DrvCtrlC2cDataType
+    @@ A2L_TYPE = MEASURE
+    @@ DATA_TYPE = FLOAT
+    @@ CONVERSION = LINEAR 1 0 "A"
+    @@ DESCRIPTION = "Phase V RMS current amplitude in Amps"
+    @@ GROUP = C2cCom
+    @@ END
+    */
+    float32 HvAcFndmtlCptIRmsPhaV;            /*! Phase V RMS current amplitude in Amps */
+
+    /*
+    @@ ELEMENT = HvAcFndmtlCptIRmsPhaW
+    @@ STRUCTURE = DrvCtrlC2cDataType
+    @@ A2L_TYPE = MEASURE
+    @@ DATA_TYPE = FLOAT
+    @@ CONVERSION = LINEAR 1 0 "A"
+    @@ DESCRIPTION = "Phase W RMS current amplitude in Amps"
+    @@ GROUP = C2cCom
+    @@ END
+    */
+    float32 HvAcFndmtlCptIRmsPhaW;            /*! Phase W RMS current amplitude in Amps */
    
 
    /*
diff --git a/src/fw_cu/Components/Cmn/Com/C2cCom/src/C2cComDrvCtrl.c b/src/fw_cu/Components/Cmn/Com/C2cCom/src/C2cComDrvCtrl.c
index b0b98882a..8dd3be119 100644
--- a/src/fw_cu/Components/Cmn/Com/C2cCom/src/C2cComDrvCtrl.c
+++ b/src/fw_cu/Components/Cmn/Com/C2cCom/src/C2cComDrvCtrl.c
@@ -235,11 +235,16 @@ FUNC(void, DRVCTRL_C2C_COM_CODE) DrvCtrlC2c_Send1ms(void)
    DrvCtrlC2cData.TempDiodePhaVBotm       = IvtrThermMdlDiodeTempPhaBot[SYSDEF_PHA_V];
    DrvCtrlC2cData.TempDiodePhaWBotm       = IvtrThermMdlDiodeTempPhaBot[SYSDEF_PHA_W];
 
-   /* HvAcIFndmtlCptAmp for phase U, V and W */
+   /* HvAcIFndmtlCptAmp peak current for phase U, V and W */
    DrvCtrlC2cData.HvAcFndmtlCptIPhaU      = HvAcIFndmtlCptAmpCalcnIPeak[SYSDEF_PHA_SET_A][SYSDEF_PHA_U];
    DrvCtrlC2cData.HvAcFndmtlCptIPhaV      = HvAcIFndmtlCptAmpCalcnIPeak[SYSDEF_PHA_SET_A][SYSDEF_PHA_V];
    DrvCtrlC2cData.HvAcFndmtlCptIPhaW      = HvAcIFndmtlCptAmpCalcnIPeak[SYSDEF_PHA_SET_A][SYSDEF_PHA_W];
 
+   /* HvAcIFndmtlCptAmp rms current for phase U, V and W */
+   DrvCtrlC2cData.HvAcFndmtlCptIRmsPhaU      = HvAcIFndmtlCptAmpCalcnIRms[SYSDEF_PHA_SET_A][SYSDEF_PHA_U];
+   DrvCtrlC2cData.HvAcFndmtlCptIRmsPhaV      = HvAcIFndmtlCptAmpCalcnIRms[SYSDEF_PHA_SET_A][SYSDEF_PHA_V];
+   DrvCtrlC2cData.HvAcFndmtlCptIRmsPhaW      = HvAcIFndmtlCptAmpCalcnIRms[SYSDEF_PHA_SET_A][SYSDEF_PHA_W];
+
    /* Measured NTC temperature difference between the U and W phases */
    DrvCtrlC2cData.NtcTempDelta            =  IvtrThermMdlIgbtNtcDeltaTempPhaUW;
 
diff --git a/src/fw_cu/build/a2l/Measurements-to-Timeslices-Mapping.csv b/src/fw_cu/build/a2l/Measurements-to-Timeslices-Mapping.csv
index 031af37af..671583d63 100644
--- a/src/fw_cu/build/a2l/Measurements-to-Timeslices-Mapping.csv
+++ b/src/fw_cu/build/a2l/Measurements-to-Timeslices-Mapping.csv
@@ -819,6 +819,9 @@ DrvCtrlC2cData.FidStbMod,Core_2,C2_100u_PWM,0.1,,,DRCO
 DrvCtrlC2cData.HvAcFndmtlCptIPhaU,Core_2,C2_100u_PWM,0.1,,,DRCO
 DrvCtrlC2cData.HvAcFndmtlCptIPhaV,Core_2,C2_100u_PWM,0.1,,,DRCO
 DrvCtrlC2cData.HvAcFndmtlCptIPhaW,Core_2,C2_100u_PWM,0.1,,,DRCO
+DrvCtrlC2cData.HvAcFndmtlCptIRmsPhaU,Core_2,C2_100u_PWM,0.1,,,DRCO
+DrvCtrlC2cData.HvAcFndmtlCptIRmsPhaV,Core_2,C2_100u_PWM,0.1,,,DRCO
+DrvCtrlC2cData.HvAcFndmtlCptIRmsPhaW,Core_2,C2_100u_PWM,0.1,,,DRCO
 DrvCtrlC2cData.HvAcICalcnIAbsFild1Sum,Core_2,C2_100u_PWM,0.1,,,DRCO
 DrvCtrlC2cData.IDcAct,Core_2,C2_1ms,1,,,DRCO
 DrvCtrlC2cData.IDcActFild10,Core_2,C2_1ms,1,,,DRCO
'
