b'commit ebfe4680dbb358e7eea44c36c3295b521924acf6
Author: mbahaa1 <mohamed.bahaa@valeo.com>
Date:   Wed Jan 26 13:10:48 2022 +0200

    $100kW-50764$ SWIT Test Hook to test interrupt timings for E2eFpga
    
    Change-Id: I2a0ff14ce33345e8dd8a4040f941fe6751a3175e

diff --git a/src/fw_cu/Components/Cmn/SWIT/SWIT_BSW/include/SWIT_BSW.h b/src/fw_cu/Components/Cmn/SWIT/SWIT_BSW/include/SWIT_BSW.h
index 50ef89c6f..74f54b6d0 100644
--- a/src/fw_cu/Components/Cmn/SWIT/SWIT_BSW/include/SWIT_BSW.h
+++ b/src/fw_cu/Components/Cmn/SWIT/SWIT_BSW/include/SWIT_BSW.h
@@ -70,6 +70,8 @@
 
 
 #define SWIT_LLSWQSpi_SeqEndNotifCfg_core2_Key 8050
+#define SWIT_LlswFpgaIf_MonrHndlrSwTreat_core2_Key 8051
+#define SWIT_LlswFpgaIf_MonrHndlrSwCalc_core2_Key 8052
 
 /*Mon MCU MACROS Start*/
 
@@ -585,6 +587,26 @@ SWIT_BSW_Check_Input(&TqSetptPhy ,SWIT_TqSetptPhy_Input_Key, SWIT_FLOAT32); \\
         }\\
      }while(0)
 
+#define SWIT_LlswFpgaIf_MonrHndlrSwTreat_core2_BgnHook()\\
+      do{\\
+        if(SWIT_LlswFpgaIf_MonrHndlrSwTreat_core2_Key==SWIT_BSW_Key){\\
+        \tSWIT_BSW_Func_TiStamp_Ticks = STM0_TIM0.U;\\
+               }\\
+     }while(0)
+
+
+#define SWIT_LlswFpgaIf_MonrHndlrSwTreat_core2_EndHook()\\
+      do{\\
+        if(SWIT_LlswFpgaIf_MonrHndlrSwTreat_core2_Key ==SWIT_BSW_Key){\\
+        \tSWIT_BSW_Func_ExecutionTime_Ticks = STM0_TIM0.U - SWIT_BSW_Func_TiStamp_Ticks ;\\
+        \tif (SWIT_BSW_Func_ExecutionTime_Ticks > SWIT_BSW_Func_Max_ExecutionTime_Ticks){\\
+        \t\tSWIT_BSW_Func_Max_ExecutionTime_Ticks = SWIT_BSW_Func_ExecutionTime_Ticks;\\
+               }\\
+        }\\
+     }while(0)
+
+
+
  /*CanCom Macros End*/
 
 #define SWIT_START_SEC_VAR_SHARE_INIT
diff --git a/src/fw_cu/Components/Inv/ValMeasAndProc/LlswFpgaIf/src/LlswFpgaIf.c b/src/fw_cu/Components/Inv/ValMeasAndProc/LlswFpgaIf/src/LlswFpgaIf.c
index 03296276c..0485a0f02 100644
--- a/src/fw_cu/Components/Inv/ValMeasAndProc/LlswFpgaIf/src/LlswFpgaIf.c
+++ b/src/fw_cu/Components/Inv/ValMeasAndProc/LlswFpgaIf/src/LlswFpgaIf.c
@@ -42,6 +42,10 @@
 #include "DrvCtrlSeqr.h"
 #include "PwmSpMux_Wrpr.h"
 
+#ifdef SWIT_Active
+\t#include "SWIT_BSW.h"
+#endif
+
 /* #include "Dio.h" */
 /* #include "Port_Cfg.h" */
 
@@ -396,6 +400,9 @@ FUNC(void, FPGA_CODE) LlswFpgaIf_Main(void) /* PRQA S 1503 */ /* Function is use
 }
 void LlswFpgaIf_MonrHndlrSwTreat_core2(void) /* PRQA S 1505 */
 {
+#ifdef SWIT_Active
+\tSWIT_LlswFpgaIf_MonrHndlrSwTreat_core2_BgnHook();
+#endif
 
    /*Set the event status to Failed for TREAT*/
    DrvCtrlErrDeb_SetEventStatus(ERR_ID_VSI_TI_OUT_TREAT, ERR_DEB_MONR_STS_FAILED);
@@ -409,6 +416,10 @@ void LlswFpgaIf_MonrHndlrSwTreat_core2(void) /* PRQA S 1505 */
    /*update the duty cycle into frame TxIpdu frame*/
    BswFpgaIf_SetTxSyncData();
 
+#ifdef SWIT_Active
+   SWIT_LlswFpgaIf_MonrHndlrSwTreat_core2_EndHook();
+#endif
+
 }
 
 STATIC FUNC(void, FPGA_CODE) LlswFpgaDecodeRx(void)
'
